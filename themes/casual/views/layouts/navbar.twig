{{ use('yii.widgets.Pjax') }}

{{ nav_bar_begin({
    'brandLabel': '<div class="dovieBrand">
            <img  src="' ~ app.view.theme.baseUrl ~ '/img/redhand.svg"><span> Dovie\' andi se tovya sagain</span>
            </div>',
    'brandUrl': app.homeUrl,
    'brandOptions': {'style': 'display: block;'},
    'options': { 'class': 'navbar-default' },
    'renderInnerContainer': true,
}) }}

<!-- everyone can see Home page -->
{% set menuItems = [{'label': t('Home'), 'url': [app.homeUrl]}] %}

<!-- we do not need to display Article/index, About and Contact pages to editor+ roles -->
{% if not app.user.can('editor') %}
    {% set menuItems = menuItems|merge([
        {
            'label': t('Articles'),
            'url': '/articles',
        }
    ]) %}
    {% set menuItems = menuItems|merge([{ 'label': t('About'), 'url': ['/about'] }]) %}
    {% set menuItems = menuItems|merge([{ 'label': t('Contact'), 'url': ['/contact'] }]) %}

{% elseif app.user.can('editor') %}
    {% set menuItems = menuItems|merge([
    {
        'label': t('Articles'),
        'url': ['/articles'],
        'items': [
            { 'label': t('All'), 'url': ['/articles'] },
            { 'label': t('Admin'), 'url': ['/article/admin'] },
            { 'label': t('Sport'), 'url': ['/articles/'~t('Sport')] },
            { 'label': t('Economy'), 'url': ['/articles/'~t('Economy')] },
            { 'label': t('Society'), 'url': ['/articles/'~t('Society')] }
        ]
    }]) %}
{% endif %}

    {% if app.user.isGuest == false %}
        {% set menuItems = menuItems|merge([
        {'label': 'About', 'url': ['/about']},
        {
        'label': t('logout') ~ '(' ~ app.user.identity.username ~ ')',
        'url': ['/logout'],
        'linkOptions': {'data-method': 'post'}
        }
        ])
        %}
    {% else %}
        {#
        {% set menuItems = menuItems|merge([
            {'label': t('Login'), 'url': ['/site/login']},
            {'label': t('Sign up'), 'url': ['/site/signup']},
        ])
        %}
        #}

    {% endif %}
    {{ nav_widget({
        'options': { 'class': 'navbar-nav navbar' },
        'items': menuItems
    }) | raw }}

    {{ nav_bar_end() }}


